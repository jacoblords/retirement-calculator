<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Retirement Pathfinder</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1"></script>
  </head>
  <body>
    <div class="backdrop"></div>
    <header class="hero">
      <div>
        <p class="eyebrow">Retirement Pathfinder</p>
        <h1>Model your future with clarity.</h1>
        <p class="subtitle">
          Explore how savings, inflation, taxes, and market returns shape your
          retirement runway. Adjust any input and watch the story change.
        </p>
      </div>
      <div class="hero-card">
        <div class="card-head">
          <span>Summary</span>
          <div class="toggle-group" role="group" aria-label="Summary units">
            <button class="toggle-button is-active" data-summary="nominal" type="button">
              Nominal
            </button>
            <button class="toggle-button" data-summary="real" type="button">
              Today’s $
            </button>
          </div>
        </div>
        <div class="metric">
          <span id="balanceAtRetirementLabel">Balance at retirement</span>
          <strong id="balanceAtRetirement">—</strong>
        </div>
        <div class="metric">
          <span>Years funded</span>
          <strong id="yearsFunded">—</strong>
        </div>
        <div class="metric">
          <span id="endingBalanceLabel">Ending balance</span>
          <strong id="endingBalance">—</strong>
        </div>
      </div>
    </header>

    <main class="grid">
      <div class="top-grid">
        <section class="panel planner">
        <h2>Your plan</h2>
        <div class="form-section">
          <h3>Timeline</h3>
          <div class="input-grid">
            <label>
              Current age
              <input type="text" inputmode="decimal" id="currentAge" value="35" min="18" max="70" />
            </label>
            <label>
              Retirement age
              <input type="text" inputmode="decimal" id="retirementAge" value="67" min="30" max="80" />
            </label>
            <label>
              Life expectancy
              <input type="text" inputmode="decimal" id="lifeExpectancy" value="95" min="60" max="110" />
            </label>
          </div>
        </div>
        <div class="form-section">
          <h3>Savings & contributions</h3>
          <div class="input-grid">
            <label>
              Current savings ($)
              <input type="text" inputmode="decimal" id="currentSavings" value="120000" min="0" step="1000" />
            </label>
            <label>
              Annual contribution ($)
              <input type="text" inputmode="decimal" id="annualContribution" value="18000" min="0" step="500" />
            </label>
            <label>
              Contribution growth (%/yr)
              <input type="text" inputmode="decimal" id="contributionGrowth" value="2" min="0" max="15" step="0.1" />
            </label>
          </div>
        </div>
        <div class="form-section">
          <h3>Markets & inflation</h3>
          <div class="input-grid">
            <label>
              Pre-retirement return (%/yr)
              <input type="text" inputmode="decimal" id="preReturn" value="6.5" min="0" max="15" step="0.1" />
            </label>
            <label>
              Post-retirement return (%/yr)
              <input type="text" inputmode="decimal" id="postReturn" value="4.5" min="-2" max="12" step="0.1" />
            </label>
            <label>
              Inflation (%/yr)
              <input type="text" inputmode="decimal" id="inflation" value="2.4" min="0" max="10" step="0.1" />
            </label>
          </div>
        </div>
        <div class="form-section">
          <h3>Retirement spending & taxes</h3>
          <div class="input-grid">
            <label>
              Tax rate on withdrawals (%)
              <input type="text" inputmode="decimal" id="taxRate" value="18" min="0" max="50" step="0.1" />
            </label>
            <label>
              Retirement spending (today $)
              <input type="text" inputmode="decimal" id="retirementSpend" value="52000" min="0" step="500" />
            </label>
            <label>
              <span class="label-head">
                Retirement spending change (%)
                <span
                  class="info-tip"
                  data-tooltip="Adjusts retirement spending each year before inflation. Many retirees spend less over time. Use 0% to keep spending flat in today’s dollars, or a negative value to model spending less. See reference note below."
                  aria-label="About retirement spending change"
                  role="note"
                >
                  i
                </span>
              </span>
              <input
                type="text"
                inputmode="decimal"
                id="retirementCOLA"
                value="-1"
                min="-5"
                max="10"
                step="0.1"
              />
            </label>
          </div>
        </div>
        <div class="form-section">
          <h3>Social Security</h3>
          <div class="input-grid">
            <label>
              Start age
              <input type="text" inputmode="decimal" id="socialSecurityStartAge" value="67" min="62" max="85" />
            </label>
            <label>
              Annual benefit (today $)
              <input type="text" inputmode="decimal" id="socialSecurityBenefit" value="24000" min="0" step="500" />
            </label>
          </div>
        </div>
        </section>

        <section class="panel charts">
        <h2>Outlook</h2>
        <div class="chart-grid">
          <div class="chart-card">
            <h3>Portfolio Balance</h3>
            <canvas id="balanceChart"></canvas>
          </div>
          <div class="chart-card">
            <h3>Cash Flow</h3>
            <canvas id="cashflowChart"></canvas>
          </div>
        </div>
        </section>
      </div>

      <section class="panel table">
        <div class="table-head">
          <h2>Year-by-year breakdown</h2>
          <button id="toggleTable">Show all years</button>
        </div>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Year</th>
                <th>Age</th>
                <th>Start balance</th>
                <th>Contribution</th>
                <th>Withdrawal</th>
                <th>Social Security</th>
                <th>Growth</th>
                <th>Tax</th>
                <th>End balance</th>
                <th>Real end balance</th>
              </tr>
            </thead>
            <tbody id="breakdownBody"></tbody>
          </table>
        </div>
      </section>
      <section class="panel references">
        <h2>References</h2>
        <p class="note">
          Retirement spending patterns:
          <a href="https://www.financialplanningassociation.org/sites/default/files/2020-09/MAY14%20JFP%20Blanchett_0.pdf" target="_blank" rel="noopener">
            Blanchett, JFP (2014)
          </a>
        </p>
      </section>
    </main>

    <script src="app.js"></script>
  </body>
</html>
